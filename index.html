
<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <link rel="stylesheet" href="./css/style.css">
    <title>Pokemon Fav Picker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</head>
<body>
    <script
		src="https://code.jquery.com/jquery-3.6.0.js"
		integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
		crossorigin="anonymous">
	
    </script>
    <script type="text/javascript" src="pokedex.js"></script>
    <script>

	$( document ).ready(function() {
		var filename = ""
		var appendString = "";
		var typeString = "";
		var typeFilename = "";
        var typeText = "";
		var idCurrentSquare = "";
		var iconString = "";
		var iconFilename ="";
		var pickerModal = document.getElementById('pickerModal');

        var columnList = ["normal",
                          "fire",
                          "grass",
                          "water",
                          "electric",
                          "ice",
                          "fighting",
                          "poison",
                          "ground",
                          "flying",
                          "psychic",
                          "bug",
                          "rock",
                          "ghost",
                          "dragon",
                          "dark",
                          "steel",
                          "fairy",
                          "starter",
                          "mega",
                          "legend",
                          "favorite"]

		for (var i in pokedex){
			appendString = '';
			typeImgTag = '';
			iconImgTag = '';
            typeText = ';';
            pokedex[i].id = i;

			for (var t in pokedex[i].type){
				typeFilename = pokedex[i].type[t].toLowerCase() + ".gif";
				typeImgTag += '<img src="./img/type/' + typeFilename + '" />';
                typeText += pokedex[i].type[t] + ";";
            };

            typeText = "<span style='display: none;'>" + typeText + "</span>";

			filename = "";
			if (pokedex[i].filename != null)
				filename = pokedex[i].filename + ".png";
			else
				filename = String(pokedex[i].dexNumber).padStart(3, '0') + ".png";

			iconFilename = "";
			if (pokedex[i].icon != null)
				iconFilename = pokedex[i].icon + ".png";
			else
				iconFilename = String(pokedex[i].dexNumber).padStart(3, '0') + ".png";

			iconImgTag = "<img src='./img/icons/" + iconFilename + "' />";

            var spacerLeft = '<tr class="trGenSpacer"><td class="tdGenHeader" colspan="4"><div><hr style="float: left; width: 40%"/>';
            var spacerRight = '<hr style="float: right; width: 40%"/></div></td></tr>';

            if (pokedex[i].dexNumber == 1)
                appendString += spacerLeft + 'Gen I' + spacerRight; 
            else if (pokedex[i].dexNumber == 152)
                appendString += spacerLeft + 'Gen II' + spacerRight; 
            else if (pokedex[i].dexNumber == 252)
                appendString += spacerLeft + 'Gen III' + spacerRight; 
            else if (pokedex[i].dexNumber == 387)
                appendString += spacerLeft + 'Gen IV' + spacerRight; 
            else if (pokedex[i].dexNumber == 494)
                appendString += spacerLeft + 'Gen V' + spacerRight; 
            else if (pokedex[i].dexNumber == 650)
                appendString += spacerLeft + 'Gen VI' + spacerRight; 
            else if (pokedex[i].dexNumber == 722)
                appendString += spacerLeft + 'Gen VII' + spacerRight; 
            else if (pokedex[i].dexNumber == 810)
                appendString += spacerLeft + 'Gen VIII' + spacerRight; 

			appendString += '<tr class="trPkmnList"'; 
			appendString += 	'data-pkmn-name="' + pokedex[i].name + '" ';
			appendString += 	'data-pkmn-dex="' + pokedex[i].dexNumber + '" ';
			appendString += 	'data-pkmn-filename="' + filename + '" ';
			appendString +=		'>';
			appendString += 	'<td>';
			appendString += 		'<i>' + String(pokedex[i].dexNumber).padStart(3,'0') + '</i>';
			appendString += 	'</td>';	
			appendString +=		'<td>';
			appendString +=     iconImgTag;
			appendString +=		'</td>';
			appendString +=		'<td style="text-align: left;">';
			appendString += 		pokedex[i].name ;
			appendString += 	'</td>';
			appendString += 	'<td style="text-align: left;">';
			appendString +=			typeImgTag + typeText;
			appendString += 	'</td>';
			appendString += '</tr>';

			$( '#tbPkmnList' ).append(appendString); 
		}

		pickerModal.addEventListener('show.bs.modal', function (event) {

			$("#inputSearch").val('');
			$("#inputSearch").trigger('keyup');
			idCurrentSquare = $( event.relatedTarget ).attr("id");

		});

		pickerModal.addEventListener('shown.bs.modal', function (event) {
			$("#inputSearch").focus();
		});

		$('.pickable').each(function(i, obj) {
    		$( obj ).attr("id", i);
    		
            $( obj ).attr("data-bs-toggle", "modal");
    		$( obj ).attr("data-bs-target", "#pickerModal"); 

            $( obj ).attr("data-row", parseInt(i / 22));
            $( obj ).attr("data-column", parseInt(i % 22));

            $( obj ).addClass(columnList[parseInt(i % 22)]);
		});

		$('.trPkmnList').click(function() {

			var newHTML = "<img src='./img/sprites/" + $( this ).attr('data-pkmn-filename') + "' title='" +  $( this ).attr('data-pkmn-name')  + "' />";
			$( "#" + idCurrentSquare ).html(newHTML);
			var modalInstance = bootstrap.Modal.getInstance(pickerModal);
			modalInstance.hide();
		});

		$("#inputSearch").on("keyup", function() {
	    	var searchValue = $(this).val().toLowerCase();
	    	$("#tbPkmnList .trPkmnList").filter(function() {
	      		$(this).toggle($(this).text().toLowerCase().indexOf(searchValue) > -1);
                $( ".trGenSpacer" ).each(function(i) {

                });
	    	});
	  	});

	});
    </script>

    <div class="containerDiv">
        <table class="tbPkmnGrid">
        	<tr>
        		<th class="label corner">Pick your<br/>favorites!</th>
        		<th class="label top">Normal</th>
        		<th class="label top">Fire</th>
        		<th class="label top">Grass</th>
        		<th class="label top">Water</th>
        		<th class="label top">Electric</th>
        		<th class="label top">Ice</th>
        		<th class="label top">Fighting</th>
        		<th class="label top">Poison</th>
        		<th class="label top">Ground</th>
        		<th class="label top">Flying</th>
        		<th class="label top">Psychic</th>
        		<th class="label top">Bug</th>
        		<th class="label top">Rock</th>
        		<th class="label top">Ghost</th>
        		<th class="label top">Dragon</th>
        		<th class="label top">Dark</th>
        		<th class="label top">Steel</th>
        		<th class="label top">Fairy</th>
        		<th class="label top">Starter</th>
        		<th class="label top">Mega/<br/>G-Max</th>
        		<th class="label top">Legend</th>
        		<th class="label top">Overall<br/>Favorite</td>
        	</tr>
        	<tr>
        		<th class="label side light">Generation<br/>I</th>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        	</tr>
        	<tr>
        		<th class="label side">Generation<br/>II</th>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        	</tr>
        	<tr>
        		<th class="label side light">Generation<br/>III</th>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        	</tr>
        	<tr>
        		<th class="label side">Generation<br/>IV</th>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        	</tr>
        	<tr>
        		<th class="label side light">Generation<br/>V</th>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        	</tr>
        	<tr>
        		<th class="label side">Generation<br/>VI</th>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        	</tr>
        	<tr>
        		<th class="label side light">Generation<br/>VII</th>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        	</tr>
        	<tr>
        		<th class="label side">Generation<br/>VIII</th>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        		<td class="pickable cell"></td>
        	</tr>
            <tr>
                <th class="label side light">Overall<br/>Favorite</th>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
                <td class="pickable cell"></td>
            </tr>
        </table>
    </div>

    <div class="modal" tabindex="-1" id="pickerModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">Pokemon Picker</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <input class="search" id="inputSearch" placeholder="Search..." />
            <hr/>
            <div id="divPkmnList" style="overflow-y: auto; height: 500px;">
            	<table style="width: 98%;">
            		<thead>
            			<th style="width:60px; text-align: center;">
            				#
            			</th>
            			<th>
            			</th>
            			<th>
            				Name
            			</th>
            			<th>
            				Type
            			</th>
            		</thead>
            		<tbody id="tbPkmnList">
            			
            		</tbody>
            	</table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

</body>
</html>
